/* Minimal, mobile-first styling */
:root{
  --bg: #0b1220;
  --fg: #e5e7eb;
  --muted:#94a3b8;
  --card:#111827;
  --accent:#38bdf8;
  --ok:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --border:#1f2937;
}
:root.light{
  --bg:#f8fafc;
  --fg:#0f172a;
  --muted:#475569;
  --card:#ffffff;
  --accent:#0ea5e9;
  --ok:#16a34a;
  --warn:#d97706;
  --bad:#dc2626;
  --border:#e5e7eb;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background:var(--bg); color:var(--fg);
  display:flex; flex-direction:column;
}
a{color:var(--accent)}

.app-header,.app-footer{
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 16px; background:var(--card); border-bottom:1px solid var(--border);
}
.app-footer{
  border-top:1px solid var(--border); border-bottom:none; margin-top:auto;
  flex-wrap:wrap; gap:8px;
}
.app-footer .update-note{flex-basis:100%; font-size:.8rem; color:var(--muted);}

.storage-info{display:flex; gap:8px; align-items:center; font-size:.85rem; color:var(--muted)}
.storage-info button{
  background:transparent; color:var(--fg); border:1px solid var(--border);
  padding:6px 10px; border-radius:8px;
}

.brand{display:flex; gap:8px; align-items:center}
.brand .logo{font-size:1.4rem}
.brand h1{font-size:1.1rem; margin:0}

.actions{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
.actions button, .actions .import-label span{
  background:transparent; color:var(--fg); border:1px solid var(--border);
  padding:6px 10px; border-radius:8px; cursor:pointer;
}
.actions .import-label span{display:inline-block}

.container{padding:16px; display:grid; gap:12px; max-width:980px; width:100%; margin:0 auto}
.panel{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:12px}
.panel h2{margin:4px 0 12px 0; font-size:1rem; color:var(--muted)}

.add form{display:grid; grid-template-columns:1fr .9fr .8fr 1fr auto; gap:8px}
.add form .full-width{grid-column:1/-1}
@media(max-width:760px){
  .add form{grid-template-columns:1fr 1fr; grid-auto-rows:auto}
  .add form button{grid-column:1/-1}
}
.file-field{display:flex; align-items:center; gap:12px; flex-wrap:wrap}
.file-field label{font-size:.85rem; color:var(--muted)}
.file-field input[type="file"]{flex:1; color:var(--fg); background:transparent; border-radius:10px; border:1px solid var(--border); padding:8px}
.file-field input[type="file"]::file-selector-button{background:var(--accent); color:#0f172a; border:none; padding:8px 12px; border-radius:8px; cursor:pointer}
.file-field input[type="file"]::-webkit-file-upload-button{background:var(--accent); color:#0f172a; border:none; padding:8px 12px; border-radius:8px; cursor:pointer}
.file-field input[type="file"]:focus{outline:2px solid var(--accent); outline-offset:2px}
.controls-grid{display:grid; grid-template-columns:1fr 1fr 1fr 1fr; gap:8px}
@media(max-width:760px){
  .controls-grid{grid-template-columns:1fr 1fr}
}

input, select, button, textarea{
  padding:10px; border-radius:10px; border:1px solid var(--border);
  background:transparent; color:var(--fg);
}
input[type="date"]{color-scheme:dark light}
textarea{resize:vertical; min-height:70px}
button{cursor:pointer}
button.linklike{background:none; border:none; padding:0; color:var(--accent)}

.tasks{list-style:none; padding:0; margin:0; display:grid; gap:8px}
.task{
  display:grid; grid-template-columns:auto 1fr auto; gap:8px; align-items:center;
  border:1px solid var(--border); border-radius:12px; padding:10px; background:rgba(255,255,255,0.02)
}
.task .left{display:flex; flex-direction:column; align-items:center; gap:4px}
.task .middle{min-width:0}
.task.dragging{opacity:.4}
.task .title{font-weight:600}
.task .meta{font-size:.85rem; color:var(--muted); display:flex; flex-wrap:wrap; gap:8px}
.task .tags{display:flex; gap:6px; flex-wrap:wrap}
.tag{padding:2px 8px; border-radius:999px; border:1px solid var(--border); font-size:.75rem; color:var(--muted)}

.task .subtasks{margin:8px 0 0 0; padding-left:0; list-style:none; display:grid; gap:4px}
.task .subtasks li{display:flex; align-items:center; gap:8px; font-size:.9rem}
.task .subtasks input[type="checkbox"]{width:16px; height:16px}
.task .subtasks label{flex:1}
.task .subtasks input[type="checkbox"]:checked + label{text-decoration:line-through; opacity:.7}
.task .recurrence{margin-top:6px; font-size:.75rem; color:var(--muted)}
.task .drag-handle{cursor:grab; color:var(--muted); padding:4px 6px; user-select:none}
.task .drag-handle:active{cursor:grabbing}

.badge{font-size:.75rem; padding:2px 8px; border-radius:999px; border:1px solid var(--border)}
.badge.ok{color:var(--ok)}
.badge.warn{color:var(--warn)}
.badge.bad{color:var(--bad)}

.task .actions{display:flex; gap:6px; flex-wrap:wrap; justify-content:flex-end}
.task .actions button{padding:6px 8px}
.task .actions .secondary{background:transparent; border-color:var(--border); color:var(--muted)}

.task .attachment{margin-top:8px; display:flex; flex-direction:column; gap:4px; max-width:220px}
.task .attachment a{display:inline-block}
.task .attachment img{display:block; width:100%; height:auto; border-radius:10px; border:1px solid var(--border)}
.task .attachment .attachment-name{font-size:.75rem; color:var(--muted)}

.task.completed{opacity:.6}
.task.overdue{border-color:var(--bad)}
.task.due-today{border-color:var(--warn)}

.empty{color:var(--muted); text-align:center; padding:12px}
.sr-only{position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; clip-path:inset(50%)}

.app-footer{gap:12px; flex-wrap:wrap}

@media(max-width:700px){
  .task{grid-template-columns:auto 1fr; grid-template-areas:"left middle" "actions actions"; align-items:flex-start}
  .task .left{grid-area:left; flex-direction:row; align-items:center; gap:6px}
  .task .middle{grid-area:middle}
  .task .actions{grid-area:actions; justify-content:flex-start}
}
